(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,a){e.exports={app:"App_app__2iZOs",dashboard:"App_dashboard__utq2B",dashboardPlaceholder:"App_dashboardPlaceholder__2ZbMl",weather:"App_weather__Hvd82",weatherDelete:"App_weatherDelete__179gr",inputCity:"App_inputCity__-s2Za",loading:"App_loading__zyJLN",input:"App_input__3vhaX",inputValid:"App_inputValid__C45gL",inputInvalid:"App_inputInvalid__1hYJv",inputCityAdd:"App_inputCityAdd__1zv7x",inputCityDelete:"App_inputCityDelete__3_fEK",error:"App_error__QTj2J"}},13:function(e,t,a){e.exports=a(20)},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(4),l=a.n(r),d=(a(19),a(2)),o=a(10),s=a(5),c=a(6),p=a(11),u=a(7),h=a(12),m=a(8),_=a.n(m),v=a(9),f=a.n(v),g=a(1),b=a.n(g),w="4c0446e10175f6a8de3d2651830475bf",y=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){var t=e.target.value,n=a.validate(t),i=n||""===t?"":"Use only Latin letters and numbers";a.setState({inputValue:t,isValidInput:""===t?null:n,error:i})},a.validate=function(e){return-1!==e.search(/^[a-zA-Z0-9]+$/i)},a.handleInputClear=function(){a.setState({inputValue:"",isValidInput:null,error:""})},a.handleDelete=function(e){return function(){var t=a.state.data.filter(function(t){return t.id!==e});a.saveToStorage(t),a.setState({data:t})}},a.saveToStorage=function(e){var t=JSON.stringify(e);localStorage.setItem("cities",t)},a.handleAdd=function(){var e=a.state,t=e.inputValue,n=e.isValidInput,i=e.data;if(-1!==i.findIndex(function(e){return e.name.toLowerCase()===t.toLowerCase()})){var r="The city ".concat(t," is already on the dashboard");a.setState({inputValue:"",isValidInput:null,error:r})}else if(t&&n){var l="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&appid=").concat(w);a.setState({isLoading:!0,error:""}),fetch(l).then(function(e){return e.json()}).then(function(e){if(200!==e.cod)throw new Error(e.message);var t={id:e.id,name:e.name,temp:e.main.temp,description:e.weather[0].description,iconcode:e.weather[0].icon},n=[].concat(Object(o.a)(i),[t]);a.saveToStorage(n),a.setState({isLoading:!1,data:n,inputValue:"",isValidInput:null})}).catch(function(e){a.setState({isLoading:!1,error:e.message})})}},a.renderDashboard=function(){return a.state.data.map(function(e){var t=e.id,n=e.name,r=e.temp,l=e.description,d=e.iconcode,o="".concat(r>=0?"+":"").concat(r.toFixed(1)," \u2103"),s="http://openweathermap.org/img/w/"+d+".png";return i.a.createElement("div",{className:b.a.weather,key:t},i.a.createElement("h3",null,n),i.a.createElement("div",null,o),i.a.createElement("img",{src:s,alt:l}),i.a.createElement("div",{onClick:a.handleDelete(t),className:b.a.weatherDelete},"Delete"))})},a.renderEmpty=function(){return i.a.createElement("div",{className:b.a.dashboardPlaceholder},"Dashboard is empty")};var n=JSON.parse(localStorage.getItem("cities"));return a.state={inputValue:"",isValidInput:null,isLoading:!1,data:n||[],error:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.state,a=t.inputValue,n=t.isValidInput,r=t.data,l=t.isLoading,o=t.error,s=_()((e={},Object(d.a)(e,b.a.input,!0),Object(d.a)(e,b.a.inputValid,!0===n),Object(d.a)(e,b.a.inputInvalid,!1===n),e));return i.a.createElement("div",{className:b.a.app},i.a.createElement("div",{className:b.a.inputCity},i.a.createElement("input",{className:s,onChange:this.handleInput,value:a,placeholder:"City..."}),i.a.createElement("button",{className:b.a.inputCityAdd,onClick:this.handleAdd,disabled:l},"Add"),i.a.createElement("button",{className:b.a.inputCityDelete,onClick:this.handleInputClear,disabled:l},"Clear"),o&&i.a.createElement("div",{className:b.a.error},o),l&&i.a.createElement(f.a,{type:"spinningBubbles",color:"grey",width:"40",height:"40",className:b.a.loading})),i.a.createElement("div",{className:b.a.dashboard},r.length>0?this.renderDashboard():this.renderEmpty()))}}]),t}(n.Component);l.a.render(i.a.createElement(y,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.6ca1da11.chunk.js.map