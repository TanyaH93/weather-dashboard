(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,a){e.exports={app:"App_app__2iZOs",dashboard:"App_dashboard__utq2B",dashboardPlaceholder:"App_dashboardPlaceholder__2ZbMl",weather:"App_weather__Hvd82",weatherDelete:"App_weatherDelete__179gr",inputCity:"App_inputCity__-s2Za",loading:"App_loading__zyJLN",input:"App_input__3vhaX",inputCityAdd:"App_inputCityAdd__1zv7x",inputCityDelete:"App_inputCityDelete__3_fEK",error:"App_error__QTj2J"}},13:function(e,t,a){e.exports=a(20)},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(4),l=a.n(i),o=(a(19),a(2)),d=a(10),s=a(5),c=a(6),p=a(11),u=a(7),h=a(12),m=a(8),_=a.n(m),f=a(9),v=a.n(f),b=a(1),g=a.n(b),w="4c0446e10175f6a8de3d2651830475bf",y=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){var t=e.target.value,n=a.validate(t),r=n||""===t?"":"Use only Latin letters and numbers";a.setState({inputValue:t,isValidInput:""===t?null:n,error:r})},a.validate=function(e){return-1!==e.search(/^[a-zA-Z0-9]+$/i)},a.handleInputClear=function(){a.setState({inputValue:"",isValidInput:null,error:""})},a.handleDelete=function(e){return function(){var t=a.state.data.filter(function(t){return t.id!==e});a.saveToStorage(t),a.setState({data:t})}},a.saveToStorage=function(e){var t=JSON.stringify(e);localStorage.setItem("cities",t)},a.handleAdd=function(){var e=a.state,t=e.inputValue,n=e.isValidInput,r=e.data;if(-1!==r.findIndex(function(e){return e.name.toLowerCase()===t.toLowerCase()})){var i="The city ".concat(t," is already on the dashboard");a.setState({inputValue:"",isValidInput:null,error:i})}else if(t&&n){var l="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&appid=").concat(w);a.setState({isLoading:!0,error:""}),fetch(l).then(function(e){return e.json()}).then(function(e){if(200!==e.cod)throw new Error(e.message);var t={id:e.id,name:e.name,temp:e.main.temp,description:e.weather[0].description,iconcode:e.weather[0].icon},n=[].concat(Object(d.a)(r),[t]);a.saveToStorage(n),a.setState({isLoading:!1,data:n,inputValue:"",isValidInput:null})}).catch(function(e){a.setState({isLoading:!1,error:e.message})})}},a.renderDashboard=function(){return a.state.data.map(function(e){var t=e.id,n=e.name,i=e.temp,l=e.description,o=e.iconcode,d="".concat(i>=0?"+":"").concat(i.toFixed(1)," \u2103"),s="http://openweathermap.org/img/w/"+o+".png";return r.a.createElement("div",{className:g.a.weather,key:t},r.a.createElement("h3",null,n),r.a.createElement("div",null,d),r.a.createElement("img",{src:s,alt:l}),r.a.createElement("div",{onClick:a.handleDelete(t),className:g.a.weatherDelete},"Delete"))})},a.renderEmpty=function(){return r.a.createElement("div",{className:g.a.dashboardPlaceholder},"Dashboard is empty")};var n=JSON.parse(localStorage.getItem("cities"));return a.state={inputValue:"",isValidInput:null,isLoading:!1,data:n||[],error:""},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.state,a=t.inputValue,n=t.isValidInput,i=t.data,l=t.isLoading,d=t.error,s=_()((e={},Object(o.a)(e,g.a.input,!0),Object(o.a)(e,g.a.inputValid,!0===n),Object(o.a)(e,g.a.inputInvalid,!1===n),e));return r.a.createElement("div",{className:g.a.app},r.a.createElement("div",{className:g.a.inputCity},r.a.createElement("input",{className:s,onChange:this.handleInput,value:a,placeholder:"City..."}),r.a.createElement("button",{className:g.a.inputCityAdd,onClick:this.handleAdd,disabled:l},"Add"),r.a.createElement("button",{className:g.a.inputCityDelete,onClick:this.handleInputClear,disabled:l},"Clear"),d&&r.a.createElement("div",{className:g.a.error},d),l&&r.a.createElement(v.a,{type:"spinningBubbles",color:"grey",width:"40",height:"40",className:g.a.loading})),r.a.createElement("div",{className:g.a.dashboard},i.length>0?this.renderDashboard():this.renderEmpty()))}}]),t}(n.Component);l.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.e64ebaec.chunk.js.map